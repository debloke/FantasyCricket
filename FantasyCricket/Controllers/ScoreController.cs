using FantasyCricket.Models;
using FantasyCricket.Service;
using Microsoft.AspNetCore.Mvc;
using Newtonsoft.Json;

namespace FantasyCricket.Controllers
{
    [Route("api/[controller]")]
    [ApiController]
    public class ScoreController : ControllerBase
    {
        private readonly ILiveScore liveScore;
        public ScoreController(ILiveScore liveScore)
        {
            this.liveScore = liveScore;
        }

        // GET api/score
        [HttpGet]
        public ActionResult<string> Get() => //JsonConvert.SerializeObject(liveScore.GetScores(), Formatting.Indented); 
            "{\r\n  \"1144489\": [\r\n    {\r\n      \"BattingPoints\": 0,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 50,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 419873,\r\n        \"R\": 7,\r\n        \"B\": 12,\r\n        \"4s\": 1,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"catch\"\r\n      },\r\n      \"BowlingScore\": null,\r\n      \"FieldingScore\": {\r\n        \"pid\": 419873,\r\n        \"catch\": 4,\r\n        \"stumped\": 0,\r\n        \"runout\": 1\r\n      },\r\n      \"pid\": 419873,\r\n      \"name\": \"Mohammad Shahzad\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 15,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 793457,\r\n        \"R\": 30,\r\n        \"B\": 25,\r\n        \"4s\": 3,\r\n        \"6s\": 1,\r\n        \"dismissal\": \"catch\"\r\n      },\r\n      \"BowlingScore\": null,\r\n      \"FieldingScore\": null,\r\n      \"pid\": 793457,\r\n      \"name\": \"Hazratullah Zazai\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 0,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 533956,\r\n        \"R\": 2,\r\n        \"B\": 11,\r\n        \"4s\": 0,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"catch\"\r\n      },\r\n      \"BowlingScore\": null,\r\n      \"FieldingScore\": null,\r\n      \"pid\": 533956,\r\n      \"name\": \"Rahmat Shah\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": -9,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 15,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 440970,\r\n        \"R\": 4,\r\n        \"B\": 17,\r\n        \"4s\": 0,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"catch\"\r\n      },\r\n      \"BowlingScore\": null,\r\n      \"FieldingScore\": {\r\n        \"pid\": 440970,\r\n        \"catch\": 0,\r\n        \"stumped\": 0,\r\n        \"runout\": 1\r\n      },\r\n      \"pid\": 440970,\r\n      \"name\": \"Hashmatullah Shahidi\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 0,\r\n      \"BowlingPoints\": 20,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 25913,\r\n        \"R\": 11,\r\n        \"B\": 16,\r\n        \"4s\": 1,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"bowled\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 25913,\r\n        \"O\": 9.0,\r\n        \"M\": 0,\r\n        \"R\": 30,\r\n        \"W\": 4,\r\n        \"0s\": 33\r\n      },\r\n      \"FieldingScore\": {\r\n        \"pid\": 25913,\r\n        \"catch\": 0,\r\n        \"stumped\": 0,\r\n        \"runout\": 0\r\n      },\r\n      \"pid\": 25913,\r\n      \"name\": \"Mohammad Nabi\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 20,\r\n      \"BowlingPoints\": -2,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 352048,\r\n        \"R\": 23,\r\n        \"B\": 32,\r\n        \"4s\": 2,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"lbw\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 352048,\r\n        \"O\": 4.0,\r\n        \"M\": 0,\r\n        \"R\": 38,\r\n        \"W\": 0,\r\n        \"0s\": 6\r\n      },\r\n      \"FieldingScore\": null,\r\n      \"pid\": 352048,\r\n      \"name\": \"Gulbadin Naib\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 49,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 15,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 524049,\r\n        \"R\": 43,\r\n        \"B\": 56,\r\n        \"4s\": 6,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"runout\"\r\n      },\r\n      \"BowlingScore\": null,\r\n      \"FieldingScore\": {\r\n        \"pid\": 524049,\r\n        \"catch\": 1,\r\n        \"stumped\": 0,\r\n        \"runout\": 0\r\n      },\r\n      \"pid\": 524049,\r\n      \"name\": \"Najibullah Zadran\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 0,\r\n      \"BowlingPoints\": 176,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 793463,\r\n        \"R\": 2,\r\n        \"B\": 4,\r\n        \"4s\": 0,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"bowled\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 793463,\r\n        \"O\": 7.5,\r\n        \"M\": 1,\r\n        \"R\": 17,\r\n        \"W\": 2,\r\n        \"0s\": 34\r\n      },\r\n      \"FieldingScore\": {\r\n        \"pid\": 793463,\r\n        \"catch\": 0,\r\n        \"stumped\": 0,\r\n        \"runout\": 0\r\n      },\r\n      \"pid\": 793463,\r\n      \"name\": \"Rashid Khan\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": -5,\r\n      \"BowlingPoints\": 95,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 516561,\r\n        \"R\": 6,\r\n        \"B\": 18,\r\n        \"4s\": 1,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"bowled\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 516561,\r\n        \"O\": 6.0,\r\n        \"M\": 0,\r\n        \"R\": 34,\r\n        \"W\": 2,\r\n        \"0s\": 24\r\n      },\r\n      \"FieldingScore\": {\r\n        \"pid\": 516561,\r\n        \"catch\": 0,\r\n        \"stumped\": 0,\r\n        \"runout\": 0\r\n      },\r\n      \"pid\": 516561,\r\n      \"name\": \"Dawlat Zadran\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 9,\r\n      \"BowlingPoints\": 45,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 311427,\r\n        \"R\": 6,\r\n        \"B\": 5,\r\n        \"4s\": 0,\r\n        \"6s\": 1,\r\n        \"dismissal\": \"bowled\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 311427,\r\n        \"O\": 7.0,\r\n        \"M\": 0,\r\n        \"R\": 53,\r\n        \"W\": 1,\r\n        \"0s\": 17\r\n      },\r\n      \"FieldingScore\": null,\r\n      \"pid\": 311427,\r\n      \"name\": \"Hamid Hassan\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 1,\r\n      \"BowlingPoints\": 16,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"Afghanistan\",\r\n      \"BattingScore\": {\r\n        \"pid\": 974109,\r\n        \"R\": 1,\r\n        \"B\": 1,\r\n        \"4s\": 0,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"not out\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 974109,\r\n        \"O\": 3.0,\r\n        \"M\": 0,\r\n        \"R\": 19,\r\n        \"W\": 0,\r\n        \"0s\": 9\r\n      },\r\n      \"FieldingScore\": null,\r\n      \"pid\": 974109,\r\n      \"name\": \"Mujeeb Ur Rahman\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 29,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 30,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 227772,\r\n        \"R\": 30,\r\n        \"B\": 45,\r\n        \"4s\": 3,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"catch\"\r\n      },\r\n      \"BowlingScore\": null,\r\n      \"FieldingScore\": {\r\n        \"pid\": 227772,\r\n        \"catch\": 1,\r\n        \"stumped\": 0,\r\n        \"runout\": 1\r\n      },\r\n      \"pid\": 227772,\r\n      \"name\": \"FDM Karunaratne\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 122,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 30,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 300631,\r\n        \"R\": 78,\r\n        \"B\": 81,\r\n        \"4s\": 8,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"catch\"\r\n      },\r\n      \"BowlingScore\": null,\r\n      \"FieldingScore\": {\r\n        \"pid\": 300631,\r\n        \"catch\": 2,\r\n        \"stumped\": 0,\r\n        \"runout\": 0\r\n      },\r\n      \"pid\": 300631,\r\n      \"name\": \"MDKJ Perera\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 26,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 301236,\r\n        \"R\": 25,\r\n        \"B\": 34,\r\n        \"4s\": 1,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"bowled\"\r\n      },\r\n      \"BowlingScore\": null,\r\n      \"FieldingScore\": null,\r\n      \"pid\": 301236,\r\n      \"name\": \"HDRL Thirimanne\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 2,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 629074,\r\n        \"R\": 2,\r\n        \"B\": 2,\r\n        \"4s\": 0,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"catch\"\r\n      },\r\n      \"BowlingScore\": null,\r\n      \"FieldingScore\": null,\r\n      \"pid\": 629074,\r\n      \"name\": \"BKG Mendis\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": -12,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 15,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 49764,\r\n        \"R\": 0,\r\n        \"B\": 2,\r\n        \"4s\": 0,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"catch\"\r\n      },\r\n      \"BowlingScore\": null,\r\n      \"FieldingScore\": {\r\n        \"pid\": 49764,\r\n        \"catch\": 1,\r\n        \"stumped\": 0,\r\n        \"runout\": 0\r\n      },\r\n      \"pid\": 49764,\r\n      \"name\": \"AD Mathews\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": -14,\r\n      \"BowlingPoints\": 4,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 465793,\r\n        \"R\": 0,\r\n        \"B\": 4,\r\n        \"4s\": 0,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"catch\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 465793,\r\n        \"O\": 1.0,\r\n        \"M\": 0,\r\n        \"R\": 7,\r\n        \"W\": 0,\r\n        \"0s\": 2\r\n      },\r\n      \"FieldingScore\": null,\r\n      \"pid\": 465793,\r\n      \"name\": \"DM de Silva\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 0,\r\n      \"BowlingPoints\": 59,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 233514,\r\n        \"R\": 2,\r\n        \"B\": 4,\r\n        \"4s\": 0,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"runout\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 233514,\r\n        \"O\": 4.0,\r\n        \"M\": 0,\r\n        \"R\": 19,\r\n        \"W\": 1,\r\n        \"0s\": 16\r\n      },\r\n      \"FieldingScore\": {\r\n        \"pid\": 233514,\r\n        \"catch\": 0,\r\n        \"stumped\": 0,\r\n        \"runout\": 0\r\n      },\r\n      \"pid\": 233514,\r\n      \"name\": \"NLTC Perera\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 2,\r\n      \"BowlingPoints\": 77,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 328026,\r\n        \"R\": 10,\r\n        \"B\": 21,\r\n        \"4s\": 0,\r\n        \"6s\": 1,\r\n        \"dismissal\": \"bowled\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 328026,\r\n        \"O\": 6.0,\r\n        \"M\": 0,\r\n        \"R\": 28,\r\n        \"W\": 1,\r\n        \"0s\": 22\r\n      },\r\n      \"FieldingScore\": null,\r\n      \"pid\": 328026,\r\n      \"name\": \"I Udana\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 0,\r\n      \"BowlingPoints\": 0,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 49619,\r\n        \"R\": 15,\r\n        \"B\": 13,\r\n        \"4s\": 2,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"not out\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 49619,\r\n        \"O\": 6.0,\r\n        \"M\": 0,\r\n        \"R\": 27,\r\n        \"W\": 0,\r\n        \"0s\": 23\r\n      },\r\n      \"FieldingScore\": null,\r\n      \"pid\": 49619,\r\n      \"name\": \"RAS Lakmal\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": 0,\r\n      \"BowlingPoints\": 200,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 0,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 49758,\r\n        \"R\": 4,\r\n        \"B\": 14,\r\n        \"4s\": 1,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"bowled\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 49758,\r\n        \"O\": 6.4,\r\n        \"M\": 0,\r\n        \"R\": 39,\r\n        \"W\": 3,\r\n        \"0s\": 23\r\n      },\r\n      \"FieldingScore\": {\r\n        \"pid\": 49758,\r\n        \"catch\": 0,\r\n        \"stumped\": 0,\r\n        \"runout\": 0\r\n      },\r\n      \"pid\": 49758,\r\n      \"name\": \"SL Malinga\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    },\r\n    {\r\n      \"BattingPoints\": -14,\r\n      \"BowlingPoints\": 260,\r\n      \"FieldingPoints\": 0,\r\n      \"Bonus\": 50,\r\n      \"Team\": \"SriLanka\",\r\n      \"BattingScore\": {\r\n        \"pid\": 324358,\r\n        \"R\": 0,\r\n        \"B\": 4,\r\n        \"4s\": 0,\r\n        \"6s\": 0,\r\n        \"dismissal\": \"bowled\"\r\n      },\r\n      \"BowlingScore\": {\r\n        \"pid\": 324358,\r\n        \"O\": 9.0,\r\n        \"M\": 1,\r\n        \"R\": 31,\r\n        \"W\": 4,\r\n        \"0s\": 41\r\n      },\r\n      \"FieldingScore\": {\r\n        \"pid\": 324358,\r\n        \"catch\": 0,\r\n        \"stumped\": 0,\r\n        \"runout\": 0\r\n      },\r\n      \"pid\": 324358,\r\n      \"name\": \"N Pradeep\",\r\n      \"Cost\": 0,\r\n      \"TeamName\": null,\r\n      \"Role\": \"BAT\"\r\n    }\r\n  ]\r\n}";
            

        // GET api/score
        [HttpGet]
        [Route("test")]
        public ActionResult<string> GetTest()
        {
            liveScore.LiveScoreCheckTimerEvent(new object());
            return JsonConvert.SerializeObject(liveScore.GetScores(), Formatting.Indented);
        }


        // GET api/score
        [HttpGet]
        [Route("points")]
        public ActionResult<UserPoints[]> GetUserPoints()
        {
            return liveScore.GetUserPoints();
        }


        [HttpGet]
        [Route("points/{gang}")]
        public ActionResult<UserPoints[]> GetUserPointsInGang(string gang)
        {
            return liveScore.GetUserPoints(gang);
        }


    }
}
